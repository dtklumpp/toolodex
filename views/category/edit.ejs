<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <script src="/scripts/app.js" defer></script>
    <%- include('../partials/external-imports.ejs') %>
    <link rel="stylesheet" href="/styles/main.css" />
    <title>Edit a Category</title>
</head>
<body>
    <div class="display-area">
        <%- include('../partials/header-navbar.ejs') %>
        <section class="corkboard">
            <div class="postit-container">
                <img src="/images/row-postits.png" class='postit-image' />
                <h2>Edit "<%= category.name %>"</h2>
            </div>
            <form action='/categories/<%= category._id %>?_method=PUT' method='POST'>
                <p>Name: <input type='text' name='name' value='<%= category.name %>' /></p>
                <p>Description: <textarea type= 'text' name='description' ><%= category.description %></textarea></p>
                <input type='submit' value='Save Changes' />
            </form>
            <form action="/categories/<%= category._id %>?_method=DELETE" method="POST">
                <input type="submit" value="Delete Category" />
            </form>
            <div class="postit-image">                
                <h2>Available Tools:</h2>
            </div>
            <ul class="edit-tools">
                <% category.tools.forEach(tool => { %>
                    <li class='tool'>
                        <a href='<%= tool.link %>' target='_blank'><%= tool.name %></a>
                        <div class='pencil edit-tool'>
                            <a href="/tools/<%=tool._id%>/edit"><i class="fas fa-edit"></i></a>
                        </div>
                        <form action="/tools/<%=tool._id%>?_method=DELETE" method="POST">
                            <input type="submit" value="Delete Tool">
                        </form>
                        <form action="/tools/<%=tool._id%>/<%=category._id%>" method="POST">
                            <input type="submit" value="Remove Tool">
                        </form>
                    </li>
                <% }); %>
                <% if(category.tools.length === 0) { %>
                    <p>There are no tools available yet!</p>
                <% } %>
                <li class="add-tool tile">
                    <a href="/tools/newTool/<%=category._id%>">
                        <div>
                            <i class="fas fa-plus"></i>
                        </div>
                    </a>
                </li>
            </ul>
        </section>
    </div>
</body>
</html>
